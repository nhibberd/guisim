<html>
<head>

<script src="jquery.js"></script>
<script src="json2.js"></script>
<script src="ArtificialHorizonCover.js"></script>
<style>

</style>

<title>Unity Web Player | WebPlayer</title>

		<script type="text/javascript" src="UnityObject.js"></script>
		<script type="text/javascript">
		<!--
		function GetUnity() {
			if (typeof unityObject != "undefined") {
				return unityObject.getObjectById("unityPlayer");
			}
			return null;
		}
		if (typeof unityObject != "undefined") {
			unityObject.embedUnity("unityPlayer", "WebPlayer.unity3d", 500, 500);

		}
		-->
		</script>
		<style type="text/css">
		<!--
		body {
			font-family: Helvetica, Verdana, Arial, sans-serif;
			background-color: white;
			color: black;
			text-align: center;
		}
		a:link, a:visited {
			color: #000;
		}
		a:active, a:hover {
			color: #666;
		}
		p.header {
			font-size: small;
		}
		p.header span {
			font-weight: bold;
		}
		p.footer {
			font-size: x-small;
		}
		div.content {
			margin: auto;
			width: 600px;
		}
		div.missing {
			margin: auto;
			position: relative;
			top: 50%;
			width: 193px;
		}
		div.missing a {
			height: 63px;
			position: relative;
			top: -31px;
		}
		div.missing img {
			border-width: 0px;
		}
		div#unityPlayer {
			cursor: default;
			height: 450px;
			width: 600px;
		}
		-->
		</style>

</head>
<body>

<script>
//Input defaults here...
var R = { P:null, I:null, D:null };
var P = { P:null, I:null, D:null };
var Y = { P:null, I:null, D:null };

function ResetPID() {

           document.getElementById("RollP").value = R.P;
           document.getElementById("RollI").value = R.I;
           document.getElementById("RollD").value = R.D;
           document.getElementById("PitchP").value = P.P;
           document.getElementById("PitchI").value = P.I;
           document.getElementById("PitchD").value = P.D;
           document.getElementById("YawP").value = Y.P;
           document.getElementById("YawI").value = Y.I;
           document.getElementById("YawD").value = Y.D;
           
}

function SavePID() {

        var c = {

            RollP : parseInt(document.getElementById("RollP").value,10) ? parseInt(document.getElementById("RollP").value,10):0,
            RollI : parseInt(document.getElementById("RollI").value,10) ? parseInt(document.getElementById("RollI").value,10) :0,
            RollD : parseInt(document.getElementById("RollD").value,10) ? parseInt(document.getElementById("RollD").value,10) : 0,
            PitchP : parseInt(document.getElementById("PitchP").value,10) ? parseInt(document.getElementById("PitchP").value,10):0,
            PitchI : parseInt(document.getElementById("PitchI").value,10) ? parseInt(document.getElementById("PitchI").value,10):0,
            PitchD : parseInt(document.getElementById("PitchD").value,10)?parseInt(document.getElementById("PitchD").value,10):0,
            YawP : parseInt(document.getElementById("YawP").value,10)?parseInt(document.getElementById("YawP").value,10):0,
            YawI : parseInt(document.getElementById("YawI").value,10)?parseInt(document.getElementById("YawI").value,10):0,
            YawD : parseInt(document.getElementById("YawD").value,10)?parseInt(document.getElementById("YawD").value,10):0

        }

	R = { P:c.RollP, I:c.RollI, D:c.RollD };
	P = { P:c.PitchP, I:c.PitchI, D:c.PitchD };
	Y = { P:c.YawP, I:c.YawI, D:c.YawD  };
	
}
</script>

<div id= "Application" hidden="hidden">

<div id = "manPage" hidden = "hidden">

		<div id = "Header" name="Header" 
		style="position:absolute;top:0%; left: 0px;border: 2px solid #333333; -moz-border-radius : 10px; height: 20px; width: 99%; z-index:100;background-color:rgba(0,0,0,0.3);">
		<center> 3DOF Simulator - User manual </center> 
		<button id="BackToSim" type="button" onClick=btnSim(); style="position:absolute; top:-2.5pt; left:0pt;">Return to Simulator</button>
		</div>
		
		<div id = "userManual" name="userManual" 
		style="position:absolute;top: 25px; left: 0px;border: 2px solid #333333; -moz-border-radius : 10px; height: 93%; width: 99%; z-index:100;background-color:"white";">
		<p>Please Note: The following simulator should be used whilst the screen is maximised to ensure appropriate layouts of functionalities.</p>
		</div>
	
</div>

	<div id = "simPage">

<div id = "Title" name="Title"
style="position:absolute;top:0%; left: 0px;border: 2px solid #333333; -moz-border-radius : 10px; height: 20px; width: 99%; z-index:100;background-color:rgba(0,0,0,0.3);">
<center><font size="+1"> 3DOF Simulator </font></center>
<button id="BackToSim" type="button" onClick=btnMan(); style="position:absolute; top:-2.5pt; left:0pt;">User Manual</button>
</div>

<div id="wholeSim" name="wholeSim">

<div id = "InputPanel" name="InputPanel"
	style="position:absolute;top:25px; left: 0%;border: 2px solid #333333; -moz-border-radius : 10px; height: 535px; width: 270px; z-index:99;background-color:rgba(0,0,0,0.3);">

<div id = "InputControls" name="InputControls" style="position:absolute;top:0%; left: 0%; height: 20px; width: 100%;">
<span style ="position:absolute; top:0pt; right:1%;"><font size="-1"><b> Input Controls </b></font></span>
</div>

<span style ="position:absolute; top:30px; left:10px;">
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td>

<div id="tab1focus" class="tab tabfocus" style="display:block;">Degree</div>

<div id="tab1ready" class="tab tabhold" style="display:none;">

<span onClick="ManageTabPanelDisplay('tab1focus','tab2ready','tab3ready','content1')">Degree</span>

</div>

</td>

<td>

<div id="tab3focus" class="tab tabfocus" style="display:none;">PID</div>

<div id="tab3ready" class="tab tabhold" style="display:block;">

<span onClick="ManageTabPanelDisplay('tab1ready','tab2ready','tab3focus','content3')">PID</span>

</div>

</td>

</tr>
<tr>
<td colspan="5">

<div id="content1" class="tabcontent" style="display:block;">

<div id="rpyWindow">

<div id = "RollWindow" name="Roll"
	style="position:absolute; bottom: 62%; left: 0px;border: 1px solid #333333; -moz-border-radius : 10px; height: 30%; width: 250px; background-color:rgba(0,0,0,0.3);">

	<span style ="position:absolute;  top:15pt; left:5%;"> Roll Angle(&deg) </span>
	<input type="text" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) || (event.keyCode==189) || (event.keyCode==190) )"  size="2" id='rA'; style ="position:absolute;  top:35pt; left:10%;  font-size:20px;" />
    	<input type="text" size="2" id='radRoll'; disabled='disabled'; style ="position:absolute; top:35pt; left:50%; font-size:20px;" />
	</div>

	<div id = "PitchWindow" name="Pitch"
	style="position:absolute;bottom:31%; left: 0;border: 1px solid #333333; -moz-border-radius : 10px; height: 30%; width: 250px; background-color:rgba(0,0,0,0.3);">

	<span style ="position:absolute; top:15pt; left:5%;"> Pitch Angle(&deg) </span>
	<input type="text" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) || (event.keyCode==189) || (event.keyCode==190) )" size="2" id='pA';  style ="position:absolute;  top:35pt; left:10%;  font-size:20px;" />
	<input type="text" disabled='disabled' size="2" id='radPitch'; style ="position:absolute;  top:35pt; left:50%;  font-size:20px;" />
	</div>

	<div id = "YawWindow" name="Yaw"
	style="position:absolute;bottom:0%; left: 0;border: 1px solid #333333; -moz-border-radius : 10px; height: 30%; width: 250px; background-color:rgba(0,0,0,0.3);">

	<span style ="position:absolute; top:15pt; left:5%;"> Yaw Angle(&deg) </span>
	<input type="text" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) || (event.keyCode==189) || (event.keyCode==190) )" size="2" id='yA';  style ="position:absolute;  top:35pt; left:10%;  font-size:20px;" />
	<input type="text" disabled='disabled' size="2" id='radYaw'; style ="position:absolute;  top:35pt; left:50%;  font-size:20px;" />
	</div>
</div>


</div>

<div id="content3" class="tabcontent" style="display:none;">

	<div id = "Div2" name="Roll"
	style="position:absolute;bottom:62%; left: 0%;border: 1px solid #333333; -moz-border-radius : 10px; height: 30%; width: 250px; z-index:100;background-color:rgba(0,0,0,0.3);">

<div id = "Div1" name="RollTitle"
	style="position:absolute;top:0px; left: 0%; height: 20px; width: 250px; z-index:100;background-color:rgba(0,0,0,0.3);">
	<span style ="position:absolute; top:0pt; left:0%;"> Roll </span>
	</div>

	<span style ="position:absolute; top:0pt; left:70pt;"> </span>
	<input id= "RollP" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )"  style ="position:absolute;  top:50pt; right:65%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:77%;"> P </span>
	<input id= "RollI" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )"  style ="position:absolute;  top:50pt; right:35%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:47%;"> I </span>
	<input id= "RollD" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )"  style ="position:absolute;  top:50pt; right:5%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:17%;"> D </span>

	</div>


	<div id = "Div4" name="Pitch"
	style="position:absolute;bottom:31%; left: 0%;border: 1px solid #333333; -moz-border-radius : 10px; height: 30%; width: 250px; z-index:100;background-color:rgba(0,0,0,0.3);">

	<div id = "Div3" name="PitchTitle"
	style="position:absolute;top:0px; left: 0%; height: 20px; width: 250px; background-color:rgba(0,0,0,0.3);">
	<span style ="position:absolute; top:0pt; left:0%;"> Pitch </span>
	</div>

	<span style ="position:absolute; top:0pt; left:70pt;"> </span>
	<input id= "PitchP" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )" style ="position:absolute;  top:50pt; right:65%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:77%;"> P </span>
	<input id= "PitchI" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )"  style ="position:absolute;  top:50pt; right:35%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:47%;"> I </span>
	<input id= "PitchD" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )" style ="position:absolute;  top:50pt; right:5%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:17%;"> D </span>

	</div>

	<div id = "Div6" name="Yaw"
	style="position:absolute;bottom:0%; left: 0%;border: 1px solid #333333; -moz-border-radius : 10px; height: 30%; width: 250px; background-color:rgba(0,0,0,0.3);">

	<div id = "Div5" name="YawTitle"
	style="position:absolute;top:0px; left: 0%; height: 20px; width: 250px; background-color:rgba(0,0,0,0.3);">
	<span style ="position:absolute; top:0pt; left:0%;"> Yaw </span>
	</div>

	<span style ="position:absolute; top:0pt; left:70pt;"> </span>
	<input id= "YawP" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )" style ="position:absolute;  top:50pt; right:65%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:77%;"> P </span>
	<input id= "YawI" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )" style ="position:absolute;  top:50pt; right:35%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:47%;"> I </span>
	<input id= "YawD" type="text" size="2" onKeyDown="return ( event.ctrlKey || event.altKey
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9)
                    || (event.keyCode>34 && event.keyCode<40)
                    || (event.keyCode==46) )" style ="position:absolute;  top:50pt; right:5%; font-size:20px;" />
	<span style ="position:absolute; top:20pt; right:17%;"> D </span>

	</div>

</div>

</td>
</tr>
</table>
</span>

<div id = "DefaultPID" name="DefaultPID"
style="position:absolute;bottom:70px; left: 10px;border: 2px solid #333333; -moz-border-radius : 10px; height: 50px; width:250px; z-index:100;background-color:rgba(0,0,0,0.3);">
<button type="button" style="position:absolute;top:0px; left: 70px;" onClick=SavePID();>Save Default PID</button>
<button type="button" style="position:absolute;top:25px; left: 60px;" onClick=ResetPID();>Reset PID to Default</button>
</div>

<div id = "Sim" name="Sim"
style="position:absolute;bottom:10px; left: 10px;border: 2px solid #333333; -moz-border-radius : 10px; height: 40px; width:250px; z-index:100;background-color:rgba(0,0,0,0.3);">
<button type="button" style="position:absolute;top:7px; left: 80px;" onClick=SendAngles();>Send Angles</button>
</div>

</div>

<div id = "OutputPanel" name="OutputPanel"
style="position:absolute;top:25px; left: 275;border: 2px solid #333333; -moz-border-radius : 10px; height: 535px; width:720px; z-index:100;background-color:rgba(0,0,0,0.3);">

<div id = "OutputControls" name="OutputControls"
style="position:absolute;top:0px; left: 0%; height: 20px; width: 100%; z-index:100;">
<span style ="position:absolute; top:0pt; left:40%;"><font size="-1"><center><b> Output Controls </b></center></font></span>
</div>

<div id="visWindow" name="visWindow">

<div id="txtWindow" name="txtWindow">

	<div id = "txt" name="txt" style="position:absolute;top:540px; left: 0px;border: 2px solid #333333; overflow:auto; -moz-border-radius : 10px; height: 100px; width: 720px; z-index:100;background-color:rgba(0,0,0,0.3);">

	<textarea id="console" id="consoleoutput" readonly="value" disabled=disabled name="console" cols="84" rows="20"></textarea>

</div>



<div id = "Sim" name="Sim"
	style="position:absolute;top:20px; left: 210px;border: 2px solid #333333; -moz-border-radius : 10px; height: 500px; width: 500px; z-index:100;background-color:rgba(0,0,0,0.3);">
			<div class="content">
				<div id="unityPlayer">
					<div class="missing" >
						<a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now!">
							<img alt="Unity Web Player. Install now!" src="http://webplayer.unity3d.com/installation/getunity.png" width="193" height="63" />
						</a>
					</div>
				</div>
			</div>
	</div>


	<div id="rollPitchPanel"
      style="position:absolute;top:20px; left: 5px;border: 2px solid #333333; -moz-border-radius : 10px; height: 200px; width: 200px; z-index:100;background-color:rgba(0,0,0,0.3);">
	<svg id="gNode" width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
	</div>


	<div id="yawPanel"
      style="position:absolute; top:225px; left:5px; border:2px solid #333333; -moz-border-radius : 10px; height: 200px; width: 200px; z-index:100;background-color:rgba(0,0,0,0.3);">
	<svg id="yawGyro" width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
	</svg>
	</div>



<div style="position:absolute; text-align:left; top:225px; left:5px; height: 200px; width: 200px; z-index:100;">
<img src="markers.png" />
</div>

	<div id = "RPYText" style = "position:absolute; top:450px; text-align:left; left:5px; height: 56px; width: 200px; border:1px solid #333333; z-index:100123123121; background-color:rgba(0,0,0,0.3);">
		<span id="RollSpan" style ="position:absolute; text-align:left; top:0px; z-index:10000"> Current Roll: 0&deg </span>
		<span id="PitchSpan" style ="position:absolute; text-align:left; top:20px;z-index:10000"> Current Pitch: 0&deg </span>
		<span id="YawSpan" style ="position:absolute; text-align:left; top:40px;x;z-index:100000"> Current Yaw: 0&deg </span>
	</div>

</div>



</div>

</div>

</div>

</div>

</div>

<style type="text/css">

#wholeSim{
width:990px;
position:absolute;
left:50%;
margin-left:-480px;
}

.tab {
	font-family: verdana,sans-serif;
	font-size: 12px;
	width: 50px;
	white-space: nowrap;
	text-align: center;
	border-style: solid;
	border-color: black;
	border-left-width: 1px;
	border-right-width: 1px;
	border-top-width: 1px;
	border-bottom-width: 0px;
	padding-top: 6px;
	padding-bottom: 6px;
	cursor: pointer;
	}
.tabhold {
	background-color: white;
	color: black;
	}
.tabfocus {
	background-color: black;
	color: white;
	}
.tabcontent {
	font-family: sans-serif;
	font-size: 14px;
	background-color: white;
	width: 250px;
	height: 325px;
	border-style: solid;
	border-color: black;
	border-width: 1px;
	padding-top: 0px;
	padding-left: 0px;
	padding-right: 0px;
	}
</style>

<script type="text/javascript" language="JavaScript"><!--
function ManageTabPanelDisplay() {

var idlist = new Array('tab1focus','tab3focus','tab1ready','tab3ready','content1','content3');

// No other customizations are necessary.
if(arguments.length < 1) { return; }
for(var i = 0; i < idlist.length; i++) {
   var block = false;
   for(var ii = 0; ii < arguments.length; ii++) {
      if(idlist[i] == arguments[ii]) {
         block = true;
         break;
         }
      }
   if(block) { document.getElementById(idlist[i]).style.display = "block"; }
   else { document.getElementById(idlist[i]).style.display = "none"; }
   }
}


	/*
	Create Login Window
	*/



	var Modal = document.createElement("div");
	Modal.style.height = document.height + "px";
	Modal.style.width =  document.width + "px";
	Modal.style.backgroundColor = "grey";
	Modal.style.opacity = "0.5";
	document.body.appendChild(Modal);

	function CheckSubmission() {
		var u = document.getElementById("UsernameInput");
		var p = document.getElementById("PasswordInput");

		//if(u.value == "admin" && p.value =="3dof") {

		if(u.value == "" && p.value =="") { //comment this out later

			Modal.hidden = "hidden";
			document.getElementById("Application").hidden = "";
		}else{
			alert('Incorrect username or password because I changed the username and password to nothing. Just press Login');
		}
	}



	function CreateLoginWindow() {
		var LoginWindow = document.createElement("div");
		LoginWindow.style.borderStyle = "solid";
		LoginWindow.style.borderWidth = "5px";
		LoginWindow.style.height = "140px";
		LoginWindow.style.width = "320px";
		LoginWindow.style.position = "Absolute"
		LoginWindow.style.backgroundColor = "white";
		Modal.appendChild(LoginWindow);
		LoginWindow.style.top =  "50%";
		LoginWindow.style.left =  "50%";
		LoginWindow.style.marginTop = -140/2 + "px";
		LoginWindow.style.marginLeft = -320/2 + "px";

		//Create UserName
		var UserName = document.createElement("div");
		var UserNameText = document.createTextNode("User Name");

		var UserNameInput = document.createElement('input');
		UserNameInput.id = "UsernameInput";
                UserNameInput.setAttribute("size", "40");
                UserNameInput.value = "";

                UserName.appendChild(UserNameText);
                UserName.appendChild(UserNameInput);

		//Create Password
		var Password = document.createElement("div");
		var PasswordText = document.createTextNode("Password");

		var PasswordInput = document.createElement('input');
		PasswordInput.id = "PasswordInput";
                PasswordInput.setAttribute("size", "40");
                PasswordInput.value = "";
                PasswordInput.type = "password";

                Password.style.margin = "10px 0px 0px 0px";

                Password.appendChild(PasswordText);
                Password.appendChild(PasswordInput);

		//Submit Button
		var SubmitButton = document.createElement("button");
		SubmitButton.type = "button";
		SubmitButton.style.width = "100px";
		SubmitButton.style.margin = "10px 0px 0px 0px";
		SubmitButton.innerHTML = "Login";
		//SubmitButton.style.position = "absolute";
		SubmitButton.style.left = "50%";
               // SubmitButton.onClick= "CheckSubmission()";
               // SubmitButton.addEventListener("onmouseup", "CheckSubmission()");
                SubmitButton.addEventListener('mousedown', Create(SubmitButton, CheckSubmission), false);

                LoginWindow.appendChild(UserName);
                LoginWindow.appendChild(Password);
                LoginWindow.appendChild(SubmitButton);

		//Create Password
	}

	CreateLoginWindow();

	//Script to switch tabs...

	function Create(obj, func) {
	    var f, target, func;

	    f = function () {
		target = arguments.callee.target;
		func = arguments.callee.func;
		return func.apply(target, arguments);
	    };

	    f.target = obj;
	    f.func = func;
	    return f;

	}

	function btnRpy() {

	    document.getElementById("pidWindow").hidden = "hidden";
	    document.getElementById("rpyWindow").hidden = "";

	}

	function btnPid() {

	    document.getElementById("rpyWindow").hidden = "hidden";
	    document.getElementById("pidWindow").hidden = "";

	}

	function btnVis() {

	    document.getElementById("txtWindow").hidden = "hidden";
	    document.getElementById("visWindow").hidden = "";

	}

	function btnTxt() {

	    document.getElementById("visWindow").hidden = "hidden";
	    document.getElementById("txtWindow").hidden = "";

	}

	function btnSim() {

	    document.getElementById("manPage").hidden = "hidden";
	    document.getElementById("simPage").hidden = "";

	}

	function btnMan() {

	    document.getElementById("simPage").hidden = "hidden";
	    document.getElementById("manPage").hidden = "";

	}

	//Use this function to add text to the console output window
	function addConsoleText(string) {
		var console = document.getElementById("console");
		console.value += "\n " + string;
	}


//Script to Send Angles to the Scene...

	function SendAngles(e) {
        //console.log(e);
        //e.preventDefault();

        CheckBoundaries();

        var packet = {
            pitch:  parseInt(document.getElementById("pA").value,10) ? parseInt(document.getElementById("pA").value,10) : 0,
            roll:  parseInt(document.getElementById("rA").value,10) ? parseInt(document.getElementById("rA").value,10) : 0,
            yaw: parseInt(document.getElementById("yA").value,10) ? parseInt(document.getElementById("yA").value,10) : 0,
            RollP : parseInt(document.getElementById("RollP").value,10) ? parseInt(document.getElementById("RollP").value,10):0,
            RollI : parseInt(document.getElementById("RollI").value,10) ? parseInt(document.getElementById("RollI").value,10) :0,
            RollD : parseInt(document.getElementById("RollD").value,10) ? parseInt(document.getElementById("RollD").value,10) : 0,
            PitchP : parseInt(document.getElementById("PitchP").value,10) ? parseInt(document.getElementById("PitchP").value,10):0,
            PitchI : parseInt(document.getElementById("PitchI").value,10) ? parseInt(document.getElementById("PitchI").value,10):0,
            PitchD : parseInt(document.getElementById("PitchD").value,10)?parseInt(document.getElementById("PitchD").value,10):0,
            YawP : parseInt(document.getElementById("YawP").value,10)?parseInt(document.getElementById("YawP").value,10):0,
            YawI : parseInt(document.getElementById("YawI").value,10)?parseInt(document.getElementById("YawI").value,10):0,
            YawD : parseInt(document.getElementById("YawD").value,10)?parseInt(document.getElementById("YawD").value,10):0


        }
        $.ajax({
            type: "POST",
            url: "/guisim/",
            dataType: 'json',
            data: JSON.stringify(packet),
            complete: function (data) {
              console.log("Sent RPY -> " + packet.pitch + "__" + packet.roll + "___" + packet.yaw);
              //console.log("Sent PIDs -> " + packet.RollP + "__" + packet.RollI + "___" + packet.RollD);
            }
        });
    };

    function UpdateSimulation() {
         var unity = GetUnity();
    if(unity) {
            $.ajax({
                url: "/guisim/",
                dataType: 'json',
                data: {},
                success: function (data) {
                  /*console.log("Polling -> " + data.roll + "___" + data.pitch + "__" + data.yaw);*/
                  unity.SendMessage("MyObject", "gRoll", data.roll);
                  unity.SendMessage("MyObject", "gPitch", data.pitch);
                  unity.SendMessage("MyObject", "gYaw", data.yaw);
                  UpdateRollPitchYawSpans(data);
                  UpdateConsole(data);
                  UpdateAH(data);
                  UpdateYawIndicator(data);
                  setTimeout(UpdateSimulation, 1000);
                }
            });
        } else {
            setTimeout(UpdateSimulation, 1000);
        }
    };

    setTimeout(UpdateSimulation, 1000);

    setInterval(UpdateRadians, 500);

    function UpdateConsole(data) {
	var console = document.getElementById("console")
	if(console) { console.value = " Roll: " + data.roll +'°' + " \tPitch: " + data.pitch +'°' + " \tYaw: " + data.yaw+'°'; }
    }

    function CheckBoundaries() {

    	r = document.getElementById("rA");
	p = document.getElementById("pA");
	y = document.getElementById("yA");
    
	rV = document.getElementById("rA").value;
	pV = document.getElementById("pA").value;
	yV = document.getElementById("yA").value;

	if(rV) {
		if(rV > 20) { r.value = 20; }
		if(rV < -20) { r.value = -20; }
	} else { r.value = 0; }

	if(pV) {
		if(pV > 20) { p.value = 20; }
		if(pV < -20) { p.value = -20; }
	} else { p.value = 0; }

	if(yV) {
		if(yV > 360) { y.value = 360; }
		if(yV < -360) { y.value = -360; }
	} else { y.value = 0; }
	
    }

    function UpdateRadians() {

	var r,p,y;
	var rr, pr, yr;

	r = document.getElementById("rA");
	p = document.getElementById("pA");
	y = document.getElementById("yA");

	rr = document.getElementById("radRoll");
	pr = document.getElementById("radPitch");
	yr = document.getElementById("radYaw");

	rr.value = "";
	pr.value = "";
	yr.value = "";

	if(r.value) {
		rr.value = Math.round(r.value * 0.0174) + " rads";
	}
	if(p.value) {
		pr.value = Math.round(p.value * 0.0174) + " rads";
	}
	if(y.value) {
		yr.value = Math.round(y.value * 0.0174) + " rads";
	}
    }


    function UpdateRollPitchYawSpans(data) {

		document.getElementById("RollSpan").innerHTML = "Current Roll: " + data.roll +'°';
		document.getElementById("PitchSpan").innerHTML = "Current Roll: " + data.pitch +'°';
		document.getElementById("YawSpan").innerHTML = "Current Roll: " + data.yaw+'°';
    }

	function UpdateAH(data) {

		var sY = parseInt(data.pitch) * 1.5;
		if(sY > 20) { sY = 20; }
		if(sY < -20) { sY = -20; }
   		rT.setAttribute("transform", "translate("+ 0 +" "+ sY+") rotate("+ parseInt(data.roll) +" "+100+" "+75+")");
   		rB.setAttribute("transform", "translate("+ 0 +" "+ sY+") rotate("+ parseInt(data.roll) +" "+100+" "+75+")");


	}

	function UpdateYawIndicator(data) {
		pin.setAttribute("transform", "rotate("+ parseInt(data.yaw) +" "+100+" "+100+")");
	}


/*
BIT OF BOTH
*/

    var svgNode = document.getElementById('gNode');
    var rT = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    rT.setAttribute("x",-40);
    rT.setAttribute("y",-53);
    rT.setAttribute("height",150);
    rT.setAttribute("width",250);
    rT.setAttribute("fill", 'blue');

    var rB = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    rB.setAttribute("x",-40);
    rB.setAttribute("y",97);
    rB.setAttribute("height",150);
    rB.setAttribute("width",250);
    rB.setAttribute("fill", 'brown');


    svgNode.appendChild(rB);
    svgNode.appendChild(rT);
    

    var Case = GenerateGyroCover();
    Case.setAttribute("transform", "translate("+ 0 + " " + -4 + ") scale("+ 0.65 +" "+ 0.66 +")");
    svgNode.appendChild(Case);

    var xDir = true;
    var yDir = true;
    var x = 0;
    var y = 0;

//setInterval ( "doSomething()", 50 );

    function doSomething() {

    if(xDir) { x++ }
    else { x-- }

    if(yDir) { y++ }
    else { y-- }

    if(x>20) { xDir=false; }
    if(x<-20) { xDir = true; }

    if(y>20) { yDir = false; }
    if(y<-20) { yDir = true; }

    //Translate UP and DOWN
   // rT.setAttribute("transform", "translate("+ 0 +" "+x+")rotate("+ x +" "+80+" "+70+")");
   // rB.setAttribute("transform", "translate("+ 0 +" "+y+") rotate("+ y +" "+80+" "+70+")");

   rT.setAttribute("transform", "rotate("+ x +" "+100+" "+75+")");
   rB.setAttribute("transform", "rotate("+ y +" "+100+" "+75+")");

}

/*Yaw Panel*/

    var svgYawNode = document.getElementById('yawGyro');
    var yawBack = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    yawBack.setAttribute("height",200);
    yawBack.setAttribute("width",200);
    yawBack.setAttribute("fill", "black");

    var yawCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    yawCircle.setAttribute("cx", "100");
    yawCircle.setAttribute("cy", "100");
    yawCircle.setAttribute("r", "100");
    yawCircle.setAttribute("fill", "white");

    var pin = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    pin.setAttribute("x",100);
    pin.setAttribute("y",0);
    pin.setAttribute("height",100);
    pin.setAttribute("width",1);
    pin.setAttribute("fill", "red");

    var yawSmallerCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    yawSmallerCircle.setAttribute("cx", 100);
    yawSmallerCircle.setAttribute("cy", 100);
    yawSmallerCircle.setAttribute("r", 5);
    yawSmallerCircle.setAttribute("fill", "black");

    var pin = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    pin.setAttribute("x",100);
    pin.setAttribute("y",0);
    pin.setAttribute("height",100);
    pin.setAttribute("width",1);
    pin.setAttribute("fill", "red");

    svgYawNode.appendChild(yawBack);
    svgYawNode.appendChild(yawCircle);
    svgYawNode.appendChild(pin);
    svgYawNode.appendChild(yawSmallerCircle);

//yaw markings for each quarter
    for(var i = 0; i <= 360; i += 90){
	var longerMark = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
	longerMark.setAttribute("x",100);
    	longerMark.setAttribute("y",0);
    	longerMark.setAttribute("height",10);
    	longerMark.setAttribute("width",1);
    	longerMark.setAttribute("fill", "black");

        svgYawNode.appendChild(longerMark);

        longerMark.setAttribute("transform", "rotate("+ i +" "+100+" "+100+")");
    }

//yaw markings for each 10 degree intervals
    for(var i = 0; i <= 360; i += 10){
	var mark = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
	mark.setAttribute("x",100);
   	mark.setAttribute("y",0);
    	mark.setAttribute("height",5);
    	mark.setAttribute("width",1);
    	mark.setAttribute("fill", "black");

	svgYawNode.appendChild(mark);

        mark.setAttribute("transform", "rotate("+ i +" "+100+" "+100+")");
    }

//yaw inner markings for each 10 degree intervals
    for(var i = 0; i <= 360; i += 10){
	var mark = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
	mark.setAttribute("x",100);
   	mark.setAttribute("y",55);
    	mark.setAttribute("height",5);
    	mark.setAttribute("width",1);
    	mark.setAttribute("fill", "black");

	svgYawNode.appendChild(mark);

        mark.setAttribute("transform", "rotate("+ i +" "+100+" "+100+")");
    }

//--></script>

</body></html>
